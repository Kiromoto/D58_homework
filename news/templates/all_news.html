{% extends 'index.html' %}

{% block title %}
All posts
{% endblock title %}

{% block content %}
<div class="top-news-area section-padding-100">
    <div class="container">
        <div class="row">
            {% if posts %}
                {% for p in posts %}
                    <!-- Single News Area -->
                    <div class="col-12 col-sm-6 col-lg-4">
                        <div class="single-blog-post style-2 mb-5">
                            <!-- Blog Thumbnail -->
                            <div class="blog-thumbnail">
                                <a href="{{ p.get_absolute_url }}"><img src="{{ p.picture.url }}" alt="Обложка новости"></a>
                            </div>

                            <!-- Blog Content -->
                            <div class="blog-content">
                                <span class="post-date">{{ p.datetime.date }}</span>
                                <a href="{{ p.get_absolute_url }}" class="post-title">{{ p.title }}</a>
                                <a href="#" class="post-author">{{ p.author }}</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <h3>На сайте нет новостей!</h3>
            {% endif %}
        </div>
    </div>

    <!-- ##### Start Pagination ##### -->
    <div style="display: flex; justify-content: center">
        {% if page_obj.has_previous %}
            <a href="?page=1">
                <button class="btn newsbox-btn btn-4 mt-15">1</button>
            </a>
            {% if page_obj.previous_page_number != 1 %}
                <a href="?page={{ page_obj.previous_page_number }}">
                    <button class="btn newsbox-btn btn-4 mt-15">{{ page_obj.previous_page_number }}</button>
                </a>
            {% endif %}
        {% endif %}

        <a href="?page={{ page_obj.number }}">
            <button class="btn newsbox-btn btn-4 mt-15" disabled="true" style="background-color: #000000" >{{ page_obj.number }}</button>
        </a>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.previous_page_number }}">
                <button class="btn newsbox-btn btn-4 mt-15">{{ page_obj.previous_page_number }}</button>
            </a>
            <a href="?page={{ page_obj.next_page_number }}">
                <button class="btn newsbox-btn btn-4 mt-15">{{ page_obj.next_page_number }}</button>
            </a>
            {% if paginator.num_pages != page_obj.next_page_number %}
                ...
                <a href="?page={{ page_obj.paginator.num_pages }}">
                    <button class="btn newsbox-btn btn-4 mt-15">{{ page_obj.paginator.num_pages }}</button>
                </a>
            {% endif %}
        {% endif %}
    </div>
    <!-- ##### End Pagination ##### -->

</div>



{% endblock content %}